module ElasticGraph
  module Local
    class DockerRunner
      def initialize: (
        ::Symbol,
        port: ::Integer,
        ui_port: ::Integer,
        version: ::String,
        env: ::String,
        ready_log_line: ::Regexp,
        daemon_timeout: ::Integer,
        output: io
      ) -> void

      @variant: ::Symbol
      @port: ::Integer
      @ui_port: ::Integer
      @version: ::String
      @env: ::String
      @ready_log_line: ::Regexp
      @daemon_timeout: ::Integer
      @output: io

      def boot: () -> void
      def halt: () -> void
      def boot_as_daemon: (halt_command: ::String) -> void

      private

      def spawn_docker_compose_up: () { (::IO) -> void } -> ::Integer
      def prepare_docker_compose_run: [T] (*::String) { (::String) -> T } -> T
    end
  end
end
